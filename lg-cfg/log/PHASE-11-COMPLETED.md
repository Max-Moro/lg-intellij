## üìã –§–∞–∑–∞ 11: Included Files Tree View ‚Äî –ó–ê–í–ï–†–®–ï–ù–ê ‚úÖ

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

#### 1. **LgIncludedFilesPanel** ‚Äî –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ä–µ–≤–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –î–≤–∞ —Ä–µ–∂–∏–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
    - **Tree mode**: –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ –ø–∞–ø–∫–∞–º
    - **Flat mode**: –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ —Å –ø–æ–ª–Ω—ã–º–∏ –ø—É—Ç—è–º–∏
- ‚úÖ Tree –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å `DefaultTreeModel`
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ —á–µ—Ä–µ–∑ `FileNode` data class
- ‚úÖ Empty state —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- ‚úÖ Double-click –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- ‚úÖ SpeedSearch –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Tree)
- ‚úÖ Toolbar —Å Actions (Show Included, Toggle View Mode)

#### 2. **FileTreeCellRenderer** ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π renderer –¥–ª—è –¥–µ—Ä–µ–≤–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å –∏–∫–æ–Ω–∫–∞–º–∏ –ø–æ —Ç–∏–ø—É (`fileType.icon`)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–∞–ø–æ–∫ —Å folder icons
- ‚úÖ –ü–∞–ø–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ fallback –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤

#### 3. **LgShowIncludedFilesAction** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç `lg report sec:...` —á–µ—Ä–µ–∑ `LgStatsService`
- ‚úÖ –ü–∞—Ä—Å–∏—Ç –º–∞—Å—Å–∏–≤ `files[]` –∏–∑ `ReportSchema`
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `LgIncludedFilesPanel.setPaths()`
- ‚úÖ Background task —Å Progress indicator
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Tool Window –µ—Å–ª–∏ —Å–∫—Ä—ã—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `LgErrorReportingService`

#### 4. **LgToggleTreeViewModeAction** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ `ToggleAction` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è Tree/Flat
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ `LgWorkspaceStateService`
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ –∏–∫–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–µ—Ä–µ–≤–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏

#### 5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Control Panel**
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "Show Included" –≤—ã–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π Action
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º Phase 11
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ `DataContext` –¥–ª—è Action

#### 6. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Actions:
    - `action.show.included.*`
    - `action.toggle.view.*`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è empty state: `included.empty.text`

#### 7. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ plugin.xml**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–µ–∫—Ü–∏—è `<actions>` —Å –≥—Ä—É–ø–ø–æ–π `LgMainGroup`
- ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ Actions –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–µ–Ω—é/shortcuts

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Tool Window**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è splitter —Å –¥–≤—É–º—è –ø–∞–Ω–µ–ª—è–º–∏ (Control Panel + Included Files) –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ Content. –≠—Ç–æ –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ —á–µ–º —Ç–∞–±—ã, —Ç–∞–∫ –∫–∞–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `FileNode` –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–µ—Ä–µ–≤–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É flat –∏ tree —Ä–µ–∂–∏–º–∞–º–∏ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—É—Ç–µ–π.

3. **VirtualFile resolution**: —Ñ–∞–π–ª—ã —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è —á–µ—Ä–µ–∑ `LocalFileSystem` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `project.basePath`. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–∏.

4. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –≤ tree —Ä–µ–∂–∏–º–µ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–∞–ø–∫–∏, –∑–∞—Ç–µ–º —Ñ–∞–π–ª—ã (–æ–±–∞ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∏–º–µ–Ω–∏).

5. **Reactive updates**: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ —á–µ—Ä–µ–∑ Toggle Action –ø–∞–Ω–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –¥–µ—Ä–µ–≤–æ —á–µ—Ä–µ–∑ `rebuildTree()`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

‚úÖ "Show Included" –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ñ–∞–π–ª—ã –≤ –¥–µ—Ä–µ–≤–µ  
‚úÖ Flat mode: –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–ª–æ—Å–∫–æ–º —Å–ø–∏—Å–∫–µ  
‚úÖ Tree mode: hierarchical folders  
‚úÖ Toggle view mode —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `LgWorkspaceStateService`  
‚úÖ Double-click –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —á–µ—Ä–µ–∑ `FileEditorManager`  
‚úÖ SpeedSearch —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ `Tree` + `TreeSpeedSearch`)  
‚úÖ Toolbar —Å Actions –≤ Included Files panel  
‚úÖ Empty state –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤

### –§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã/–∏–∑–º–µ–Ω–µ–Ω—ã

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ:**
- `src/main/kotlin/lg/intellij/actions/LgShowIncludedFilesAction.kt`
- `src/main/kotlin/lg/intellij/actions/LgToggleTreeViewModeAction.kt`
- `src/main/kotlin/lg/intellij/ui/renderers/FileTreeCellRenderer.kt`

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ:**
- `src/main/kotlin/lg/intellij/ui/toolwindow/LgIncludedFilesPanel.kt` (–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–¥–µ–ª–∫–∞)
- `src/main/kotlin/lg/intellij/ui/toolwindow/LgControlPanel.kt` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Show Included button)
- `src/main/resources/messages/LgBundle.properties` (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- `src/main/resources/META-INF/plugin.xml` (–¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `<actions>`)

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–§–∞–∑–∞ 11 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.

**–°–ª–µ–¥—É—é—â–∞—è —Ñ–∞–∑–∞: Phase 13 ‚Äî Tags Configuration UI**

–ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω modal dialog –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–µ–≥–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ tag-sets
- Checkboxes –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ–≥–∞
- Collapsible groups
- Save/Cancel buttons
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `LgPanelStateService` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤
