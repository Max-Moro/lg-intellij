src:
  extensions: [".kt", ".kts", ".xml", ".properties"]
  filters:
    mode: allow
    allow:
      - "/build.gradle.kts"
      - "/settings.gradle.kts"
      - "/src/"
    children:
      src:
        mode: allow
        allow:
          - "/main/"
        children:
          main:
            mode: allow
            allow:
              - "/kotlin/"
              - "/resources/"
            children:
              kotlin:
                mode: allow
                allow:
                  - "/icons/"
                  - "/lg/"
                children:
                  lg:
                    mode: allow
                    allow:
                      - "/intellij/"
                    children:
                      intellij:
                        mode: allow
                        when:
                        - condition: "TAGSET:intellij-plugin:core"
                          allow:
                            - "/cli/CliExecutor.kt"
                            - "/LgBundle.kt"
                            - "/models/CliResult.kt"
                            - "/services/LgErrorReportingService.kt"
                            - "/services/state/LgSettingsService.kt"
                            - "/settings/LgSettingsConfigurable.kt"
                            - "/toolWindow/LgToolWindowFactory.kt"
                            - "/utils/LgStubNotifications.kt"
                            # Перенести позже
                            - "/models/DiagReportSchema.kt"
                            - "/models/ModeSetsListSchema.kt"
                            - "/models/TagSetsListSchema.kt"
                        - condition: "TAGSET:intellij-plugin:ui"
                          allow: "/ui/components/"
                        - condition: "TAGSET:intellij-plugin:control"
                          allow:
                            - "/ui/toolwindow/LgControlPanel.kt"
                            - "/services/state/LgPanelStateService.kt"
                            - "/services/state/LgWorkspaceStateService.kt"
                            - "/ui/components/LgWrappingPanel.kt"
                            - "/ui/components/LgTaskTextField.kt"
                        - condition: "TAGSET:intellij-plugin:generate"
                          allow:
                            - "/services/generation/LgGenerationService.kt"
                            - "/services/generation/CliArgsBuilder.kt"
                            - "/services/vfs/LgVirtualFileService.kt"
                            - "/actions/LgGenerate**.kt"
                        - condition: "TAGSET:intellij-plugin:catalog"
                          allow:
                            - "/actions/LgRefreshCatalogsAction.kt"
                            - "/models/ContextsListSchema.kt"
                            - "/models/EncodersListSchema.kt"
                            - "/models/SectionsListSchema.kt"
                            - "/models/TokenizerLibsListSchema.kt"
                            - "/listeners/LgConfigFileListener.kt"
                            - "/services/catalog/LgCatalogService.kt"
                            - "/services/catalog/TokenizerCatalogService.kt"
                        - condition: "TAGSET:intellij-plugin:cli"
                          allow:
                            - "/cli/CliResolver.kt"
                            - "/cli/CliException.kt"
                            - "/listeners/LgSettingsChangeListener.kt"
                        - condition: "TAGSET:intellij-plugin:stats"
                          allow:
                            - "**Stats**"
                            - "/generation/CliArgsBuilder.kt"
                            - "/models/ReportSchema.kt"
                            - "/services/state/LgPanelStateService.kt"
                            - "/ui/components/LgTaskTextField.kt"
                            - "/ui/components/LgGroupedTable.kt"
                            - "/utils/LgFormatUtils.kt"
                        - condition: "TAGSET:intellij-plugin:included-files"
                          allow:
                            - "/ui/toolwindow/LgIncludedFilesPanel.kt"
                            - "/ui/renderers/FileTreeCellRenderer.kt"
                            - "/actions/LgShowIncludedFilesAction.kt"
                            - "/actions/LgToggleTreeViewModeAction.kt"
                            - "/services/generation/LgStatsService.kt"
                            - "/services/generation/CliArgsBuilder.kt"
                            - "/services/state/LgWorkspaceStateService.kt"
                            - "/models/ReportSchema.kt"
