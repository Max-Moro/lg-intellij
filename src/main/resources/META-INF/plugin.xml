<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique plugin identifier -->
    <id>lg.intellij</id>
    
    <!-- Plugin display name -->
    <name>Listing Generator</name>

    <!-- Vendor information -->
    <vendor email="mmocentre@gmail.com" url="https://github.com/Max-Moro/lg-intellij">
        Max-Moro
    </vendor>

    <!-- Platform dependency -->
    <depends>com.intellij.modules.platform</depends>

    <!-- Optional Git integration -->
    <depends optional="true" config-file="withGit.xml">Git4Idea</depends>
    
    <!-- Optional JetBrains AI Assistant integration -->
    <depends optional="true" config-file="withJetBrainsAi.xml">com.intellij.ml.llm</depends>
    
    <!-- Optional GitHub Copilot integration -->
    <depends optional="true" config-file="withGitHubCopilot.xml">com.github.copilot</depends>
    
    <!-- Optional Junie integration -->
    <depends optional="true" config-file="withJunie.xml">org.jetbrains.junie</depends>
    
    <!-- Resource bundle for localization -->
    <resource-bundle>messages.LgBundle</resource-bundle>
    
    <!-- Extensions -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Notification Groups -->
        <notificationGroup 
            id="LG Notifications"
            displayType="BALLOON"/>
        
        <!-- Important notifications (sticky, for errors) -->
        <notificationGroup 
            id="LG Important"
            displayType="STICKY_BALLOON"/>
        
        <!-- Tool Window -->
        <toolWindow 
            id="Listing Generator"
            anchor="right"
            factoryClass="lg.intellij.toolWindow.LgToolWindowFactory"
            icon="icons.LgIcons.ToolWindow"
            canCloseContents="false"/>
        
        <!-- Settings -->
        <applicationConfigurable 
            parentId="tools"
            instance="lg.intellij.settings.LgSettingsConfigurable"
            id="lg.intellij.settings"
            key="settings.display.name"
            bundle="messages.LgBundle"/>
    </extensions>

    <!-- Listeners -->
    <applicationListeners>
        <listener 
            topic="lg.intellij.listeners.LgSettingsChangeListener"
            class="lg.intellij.listeners.CliResolverCacheInvalidator"/>
    </applicationListeners>
    
    <projectListeners>
        <!-- VFS changes listener for auto-reload lg-cfg/ -->
        <listener 
            topic="com.intellij.openapi.vfs.newvfs.BulkFileListener"
            class="lg.intellij.listeners.LgConfigFileListener"/>
    </projectListeners>
</idea-plugin>
